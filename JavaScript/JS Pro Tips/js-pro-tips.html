<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JS pro tips</title>
</head>
<body>


<!-- https://www.youtube.com/watch?v=Mus_vwhTCq0&feature=push-u-sub&attr_tag=BGRLpNzNEneLhFgg%3A6  -->
<script>

const foo = { name : "tom", age : 30, nervous : false};

const bar = { name : "dick", age : 40, nervous : false};

const foo2 = { name : "harry", age : 50, nervous : true};

//! Bad code
console.log(foo);
console.log(bar);
console.log(foo2);

//* Good code

// Add custom css
console.log("%c My friends",'color:orange;font-weight:bold;');
console.log({foo,bar,foo2});

console.table([foo,bar,foo2]);
//-------------------------------------------
// Keep track of time
console.time("looper");
let i = 0;
while(i < 1000000) i++;
console.timeEnd("looper");

//-------------------------------------------
// Where a console log originated from
const deleteMe = () => console.trace("bye bye database!");
deleteMe(); // js-pro-tips.html:42

deleteMe(); // js-pro-tips.html:42

//-------------------------------------------
const turtle = {
    name : 'Bob',
    legs : 4,
    shell : true,
    type : 'amphibious',
    meal : 10,
    diet : 'berries'
};
// Destructuring
function feed({name, meal,diet}) {
    return `Feed ${name} ${meal} kilos of ${diet}`;
}

console.log(feed(turtle)) // Feed Bob 10 kilos of berries

//-------------------------------------------
// Advanced tag example

function horseAge(str,age) { 
    const ageStr = age > 5 ? "old" : "young";
    return `${str[0]}${ageStr} at ${age} years`;
}
const bio = horseAge`This horse is ${6}`; // The horse is old at 6 years

//-------------------------------------------
// Spread syntax
const obj1 = {a : "A", b : "B"};
const obj2 = {c : "C", d : "D"};

// Priority : From left to right
const obj3 = {...obj1, ...obj2};
console.log(obj3); // {a: "A", b: "B", c: "C", d: "D"}
const obj4 = {...obj2, ...obj1}; // {c: "C", d: "D", a: "A", b: "B"}
console.log(obj4);

// Modify property

const obj3_modified = {... obj3, a:"A changed"}; 
console.log(obj3_modified); // {a: "A changed", b: "B", c: "C", d: "D"}

// Arrays
let names = ["Andrei","Dan","Vasile"];

// Push
names = [...names, "Mihai","Vlad"];
console.log(names) // ["Andrei", "Dan", "Vasile", "Mihai", "Vlad"]

// Unshift
names = ["Andreea","Sofia", ...names];
console.log(names); // ["Andreea", "Sofia", "Andrei", "Dan", "Vasile", "Mihai", "Vlad"]

//-------------------------------------------
// Loops
let orders = [100,300,30,10,500];


// Reduce 
const total = orders.reduce((acc,curr) => acc + curr);
console.log(total); // 940

// Map
const withTax = orders.map(item => item  * 1.1);
console.log(withTax); // Â [110.00000000000001, 330, 33, 11, 550]

// Filter - when cb === true, it will allow a value to go through
const highValue = orders.filter(item => item > 30); 
console.log(highValue); // [100, 300, 500]

//-------------------------------------------
// Async/Await
const random = () => {
    return Promise.resolve(Math.random());
}

// Bad code
const sumRandomAsyncNums_bad = async() => {
    let first,
        second,
        third;
    return random()
        .then(v => {
            first = v;
            // Another promise coming up..
            return random();
        })
        .then(v => {
            second = v;
            return random();
        })
        .then(v => {
            third = v;
            return first + second + third;
        })
        .then(v => {
            console.log(`Result from 'bad' code : ${v}`);
        });
}
sumRandomAsyncNums_bad(); // 0.7695012088985638

const sumRandomAsyncNums = async() => {
    const first = await random();
    const second = await random();
    const third = await random();
    console.log(`Result : ${first + second + third}`);
}
sumRandomAsyncNums(); // 1.122529392752784

</script>
</body>
</html>
